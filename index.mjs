// Copyright (c) 2024 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import{isPrimitive as r}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@v0.2.1-esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-array-like-object@v0.2.1-esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@v0.2.1-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@v0.2.1-esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-object@v0.2.1-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-iterator-symbol-support@v0.2.1-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/symbol-iterator@v0.2.1-esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@v0.2.1-esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-accessor@v0.2.2-esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/array-int32@v0.2.1-esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/array-int8@v0.2.1-esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.2.1-esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-ceil@v0.2.1-esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-floor@v0.2.1-esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-ext-base-grev@v0.2.1-esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/boolean-ctor@v0.2.1-esm/index.mjs";function m(r,t){return c(r>>t&1)}function v(r,t){return r>>t&1}var E=o(),g=8*p.BYTES_PER_ELEMENT;function _(t){if(!(this instanceof _))return new _(t);if(!r(t))throw new TypeError(d("1S92K",t));return this._N=t,this._M=0,this._buffer=new p(l(t*t/g)),this}f(_,"fromAdjacencyList",(function(r){var o,f,h,p,u,l,w,a,c,m;if(!n(this))throw new TypeError(d("1S901"));if(this!==_)throw new TypeError(d("1S91c"));if((f=arguments.length)>1){if(!n(p=arguments[1]))throw new TypeError(d("1S92H",p));f>2&&(o=arguments[2])}if(t(r)){if(u=new this(a=r.length),p){for(c=0;c<a;c++){if(h=p.call(o,r[c],c),!e(h))throw new TypeError(d("1S9Aq",h));for(m=0;m<h.length;m++)u.addEdge(c,h[m])}return u}for(c=0;c<a;c++){if(h=r[c],!e(h))throw new TypeError(d("1S9Ar",r));for(m=0;m<h.length;m++)u.addEdge(c,h[m])}return u}if(i(r)&&E&&n(r[s])){if(l=r[s](),!n(l.next))throw new TypeError(d("1S92J",r));if(l=p?function(r,t,n){var i,o,s,f;for(i=[],f=-1;;){if(f+=1,s=(o=r.next()).value){if(s=t.call(n,s,f),!e(s))return new TypeError(d("1S9Ap",s));i.push(s)}if(o.done)break}return i}(l,p,o):function(r){var t,n,i;for(t=[];;){if(i=(n=r.next()).value){if(!e(i))return new TypeError(d("1S9Ao",i));t.push(i)}if(n.done)break}return t}(l),l instanceof Error)throw l;for(u=new this(w=l.length),c=0;c<w;c++)for(h=l[c],m=0;m<h.length;m++)u.addEdge(c,h[m]);return u}throw new TypeError(d("1S92J",r))})),f(_,"fromEdges",(function(o,f){var h,p,u,l,w,a,c,m;if(!n(this))throw new TypeError(d("1S901"));if(this!==_)throw new TypeError(d("1S91c"));if((p=arguments.length)>2){if(!n(u=arguments[2]))throw new TypeError(d("1S93N",u));p>3&&(h=arguments[3])}if(!r(o))throw new TypeError(d("1S92d",o));if(t(f)){if(u){for(w=new this(o),m=0;m<f.length;m++){if(l=u.call(h,f[m],m),!t(l))throw new TypeError(d("1S9Aq",l));w.addEdge(l[0],l[1])}return w}for(w=new this(o),m=0;m<f.length;m++){if(l=f[m],!t(l))throw new TypeError(d("1S9As",l));w.addEdge(l[0],l[1])}return w}if(i(f)&&E&&n(f[s])){if(a=f[s](),!n(a.next))throw new TypeError(d("1S92J",f));if(a=u?function(r,t,n){var i,o,s,f;for(i=[],f=-1;;){if(f+=1,s=(o=r.next()).value){if(s=t.call(n,s,f),!e(s))return new TypeError(d("1S9Ap",s));i.push(s[0],s[1])}if(o.done)break}return i}(a,u,h):function(r){var t,n,i;for(t=[];;){if(i=(n=r.next()).value){if(!e(i))return new TypeError(d("1S9Ao",i));t.push(i[0],i[1])}if(n.done)break}return t}(a),a instanceof Error)throw a;for(w=new this((c=a.length)/2),m=0;m<c;m+=2)w.addEdge(a[m],a[m+1]);return w}throw new TypeError(d("1S9At",f))})),f(_.prototype,"_loc",(function(r,t,e){var n,i,o;return i=(o=r*this._N+t)-(n=w(o/g))*g,e[0]=n,e[1]=i,e})),f(_.prototype,"addEdge",(function(t,e){var n;if(!r(t))throw new TypeError(d("1S92d",t));if(!r(e))throw new TypeError(d("1S93X",e));if(t>=this._N)throw new RangeError(d("1S9Au",t));if(e>=this._N)throw new RangeError(d("1S9Av",e));return n=this._loc(t,e,[0,0]),!1===m(this._buffer[n[0]],n[1])&&(this._buffer[n[0]]=function(r,t){return r|1<<t}(this._buffer[n[0]],n[1]),this._M+=1),this})),h(_.prototype,"edges",(function(){var r,t,e,n;for(r=[],t=[0,0],e=0;e<this._N;e++)for(n=0;n<this._N;n++)t=this._loc(e,n,t),m(this._buffer[t[0]],t[1])&&r.push([e,n]);return r})),f(_.prototype,"hasEdge",(function(t,e){var n;if(!r(t))throw new TypeError(d("1S92d",t));if(!r(e))throw new TypeError(d("1S93X",e));if(t>=this._N)throw new RangeError(d("1S9Au",t));if(e>=this._N)throw new RangeError(d("1S9Av",e));return n=this._loc(t,e,[0,0]),m(this._buffer[n[0]],n[1])})),f(_.prototype,"inDegree",(function(t){var e,n,i;if(!r(t))throw new TypeError(d("1S92K",t));if(t>=this._N)throw new RangeError(d("1S9Aw",t));for(e=0,n=[0,0],i=0;i<this._N;i++)n=this._loc(i,t,n),e+=v(this._buffer[n[0]],n[1]);return e})),f(_.prototype,"inEdges",(function(t){var e,n,i;if(!r(t))throw new TypeError(d("1S92K",t));if(t>=this._N)throw new RangeError(d("1S9Aw",t));for(e=[],n=[0,0],i=0;i<this._N;i++)n=this._loc(i,t,n),m(this._buffer[n[0]],n[1])&&e.push(i);return e})),h(_.prototype,"nedges",(function(){return this._M})),h(_.prototype,"nvertices",(function(){return this._N})),f(_.prototype,"outDegree",(function(t){var e,n,i;if(!r(t))throw new TypeError(d("1S92K",t));if(t>=this._N)throw new RangeError(d("1S9Aw",t));for(e=0,n=[0,0],i=0;i<this._N;i++)n=this._loc(t,i,n),e+=v(this._buffer[n[0]],n[1]);return e})),f(_.prototype,"outEdges",(function(t){var e,n,i;if(!r(t))throw new TypeError(d("1S92K",t));if(t>=this._N)throw new RangeError(d("1S9Aw",t));for(e=[],n=[0,0],i=0;i<this._N;i++)n=this._loc(t,i,n),m(this._buffer[n[0]],n[1])&&e.push(i);return e})),f(_.prototype,"removeEdge",(function(t,e){var n;if(!r(t))throw new TypeError(d("1S92d",t));if(!r(e))throw new TypeError(d("1S93X",e));if(t>=this._N)throw new RangeError(d("1S9Au",t));if(e>=this._N)throw new RangeError(d("1S9Av",e));return n=this._loc(t,e,[0,0]),m(this._buffer[n[0]],n[1])&&(this._buffer[n[0]]=function(r,t){return r&~(1<<t)}(this._buffer[n[0]],n[1]),this._M-=1),this})),f(_.prototype,"toAdjacencyList",(function(){var r,t,e,n,i;for(r=[],t=[0,0],n=0;n<this._N;n++){for(e=[],i=0;i<this._N;i++)t=this._loc(n,i,t),m(this._buffer[t[0]],t[1])&&e.push(i);r.push(e)}return r})),f(_.prototype,"toposort",(function(){var r,t,e,n,i,o,s;if(t=this,i=this._N,e=[],0===this._N)return[e,null];for(r=new u(i),o=[],n=[0,0],s=0;s<i;s++)if(0===r[s]&&0!==f(s))return o.push(s),[null,o];return a(e.length,e,1),[e,null];function f(s){var h,p;if(2===r[s])return 0;if(1===r[s])return-1;for(r[s]=1,p=0;p<i;p++)if(n=t._loc(s,p,n),m(t._buffer[n[0]],n[1])&&0!==(h=f(p)))return o.push(p),h;return r[s]=2,e.push(s),0}}));export{_ as default};
//# sourceMappingURL=index.mjs.map
