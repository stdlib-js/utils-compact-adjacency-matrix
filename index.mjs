// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-array-like-object@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-object@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-iterator-symbol-support@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/symbol-iterator@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-accessor@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/array-int32@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/array-int8@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-ceil@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-floor@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-ext-base-grev@esm/index.mjs";var m=t,w=d;var c=function(r){var e,t,i;for(e=[];;){if(i=(t=r.next()).value){if(!m(i))return new TypeError(w("0ivBV",i));e.push(i)}if(t.done)break}return e},g=t,E=d;var _=function(r,e,t){var i,n,o,s;for(i=[],s=-1;;){if(s+=1,o=(n=r.next()).value){if(o=e.call(t,o,s),!g(o))return new TypeError(E("0ivBW",o));i.push(o)}if(n.done)break}return i},y=t,j=d;var b=function(r){var e,t,i;for(e=[];;){if(i=(t=r.next()).value){if(!y(i))return new TypeError(j("0ivBV",i));e.push(i[0],i[1])}if(t.done)break}return e},x=t,T=d;var N=function(r,e,t){var i,n,o,s;for(i=[],s=-1;;){if(s+=1,o=(n=r.next()).value){if(o=e.call(t,o,s),!x(o))return new TypeError(T("0ivBW",o));i.push(o[0],o[1])}if(n.done)break}return i};var B=function(r,e){return r|=1<<e};var V=function(r,e){return r&=~(1<<e)};var R=function(r,e){return Boolean(r>>e&1)};var k=function(r,e){return r>>e&1},M=r.isPrimitive,L=e,U=t,A=i,D=n,P=s,S=f,W=h,X=u,Y=a,Z=d,q=p,z=l,C=v,F=c,G=_,H=b,I=N,J=B,K=V,O=R,Q=k,$=o(),rr=8*X.BYTES_PER_ELEMENT;function er(r){if(!(this instanceof er))return new er(r);if(!M(r))throw new TypeError(Z("0iv2V",r));return this._N=r,this._M=0,this._buffer=new X(q(r*r/rr)),this}S(er,"fromAdjacencyList",(function(r){var e,t,i,n,o,s,f,h,u,a;if(!A(this))throw new TypeError(Z("0iv01"));if(this!==er)throw new TypeError(Z("0iv1m"));if((t=arguments.length)>1){if(!A(n=arguments[1]))throw new TypeError(Z("0iv2S",n));t>2&&(e=arguments[2])}if(L(r)){if(o=new this(h=r.length),n){for(u=0;u<h;u++){if(i=n.call(e,r[u],u),!U(i))throw new TypeError(Z("0ivBX",i));for(a=0;a<i.length;a++)o.addEdge(u,i[a])}return o}for(u=0;u<h;u++){if(i=r[u],!U(i))throw new TypeError(Z("0ivBY",r));for(a=0;a<i.length;a++)o.addEdge(u,i[a])}return o}if(D(r)&&$&&A(r[P])){if(s=r[P](),!A(s.next))throw new TypeError(Z("0iv2U",r));if((s=n?G(s,n,e):F(s))instanceof Error)throw s;for(o=new this(f=s.length),u=0;u<f;u++)for(i=s[u],a=0;a<i.length;a++)o.addEdge(u,i[a]);return o}throw new TypeError(Z("0iv2U",r))})),S(er,"fromEdges",(function(r,e){var t,i,n,o,s,f,h,u;if(!A(this))throw new TypeError(Z("0iv01"));if(this!==er)throw new TypeError(Z("0iv1m"));if((i=arguments.length)>2){if(!A(n=arguments[2]))throw new TypeError(Z("0iv3Z",n));i>3&&(t=arguments[3])}if(!M(r))throw new TypeError(Z("0iv2p",r));if(L(e)){if(n){for(s=new this(r),u=0;u<e.length;u++){if(o=n.call(t,e[u],u),!L(o))throw new TypeError(Z("0ivBX",o));s.addEdge(o[0],o[1])}return s}for(s=new this(r),u=0;u<e.length;u++){if(o=e[u],!L(o))throw new TypeError(Z("0ivBZ",o));s.addEdge(o[0],o[1])}return s}if(D(e)&&$&&A(e[P])){if(f=e[P](),!A(f.next))throw new TypeError(Z("0iv2U",e));if((f=n?I(f,n,t):H(f))instanceof Error)throw f;for(s=new this((h=f.length)/2),u=0;u<h;u+=2)s.addEdge(f[u],f[u+1]);return s}throw new TypeError(Z("0ivBb",e))})),S(er.prototype,"_loc",(function(r,e,t){var i,n,o;return n=(o=r*this._N+e)-(i=z(o/rr))*rr,t[0]=i,t[1]=n,t})),S(er.prototype,"addEdge",(function(r,e){var t;if(!M(r))throw new TypeError(Z("0iv2p",r));if(!M(e))throw new TypeError(Z("0iv3k",e));if(r>=this._N)throw new RangeError(Z("0ivBc",r));if(e>=this._N)throw new RangeError(Z("0ivBd",e));return t=this._loc(r,e,[0,0]),!1===O(this._buffer[t[0]],t[1])&&(this._buffer[t[0]]=J(this._buffer[t[0]],t[1]),this._M+=1),this})),W(er.prototype,"edges",(function(){var r,e,t,i;for(r=[],e=[0,0],t=0;t<this._N;t++)for(i=0;i<this._N;i++)e=this._loc(t,i,e),O(this._buffer[e[0]],e[1])&&r.push([t,i]);return r})),S(er.prototype,"hasEdge",(function(r,e){var t;if(!M(r))throw new TypeError(Z("0iv2p",r));if(!M(e))throw new TypeError(Z("0iv3k",e));if(r>=this._N)throw new RangeError(Z("0ivBc",r));if(e>=this._N)throw new RangeError(Z("0ivBd",e));return t=this._loc(r,e,[0,0]),O(this._buffer[t[0]],t[1])})),S(er.prototype,"inDegree",(function(r){var e,t,i;if(!M(r))throw new TypeError(Z("0iv2V",r));if(r>=this._N)throw new RangeError(Z("invalid argument. Vertex cannot exceed matrix dimensions. Value: `%u`.",r));for(e=0,t=[0,0],i=0;i<this._N;i++)t=this._loc(i,r,t),e+=Q(this._buffer[t[0]],t[1]);return e})),S(er.prototype,"inEdges",(function(r){var e,t,i;if(!M(r))throw new TypeError(Z("0iv2V",r));if(r>=this._N)throw new RangeError(Z("invalid argument. Vertex cannot exceed matrix dimensions. Value: `%u`.",r));for(e=[],t=[0,0],i=0;i<this._N;i++)t=this._loc(i,r,t),O(this._buffer[t[0]],t[1])&&e.push(i);return e})),W(er.prototype,"nedges",(function(){return this._M})),W(er.prototype,"nvertices",(function(){return this._N})),S(er.prototype,"outDegree",(function(r){var e,t,i;if(!M(r))throw new TypeError(Z("0iv2V",r));if(r>=this._N)throw new RangeError(Z("invalid argument. Vertex cannot exceed matrix dimensions. Value: `%u`.",r));for(e=0,t=[0,0],i=0;i<this._N;i++)t=this._loc(r,i,t),e+=Q(this._buffer[t[0]],t[1]);return e})),S(er.prototype,"outEdges",(function(r){var e,t,i;if(!M(r))throw new TypeError(Z("0iv2V",r));if(r>=this._N)throw new RangeError(Z("invalid argument. Vertex cannot exceed matrix dimensions. Value: `%u`.",r));for(e=[],t=[0,0],i=0;i<this._N;i++)t=this._loc(r,i,t),O(this._buffer[t[0]],t[1])&&e.push(i);return e})),S(er.prototype,"removeEdge",(function(r,e){var t;if(!M(r))throw new TypeError(Z("0iv2p",r));if(!M(e))throw new TypeError(Z("0iv3k",e));if(r>=this._N)throw new RangeError(Z("0ivBc",r));if(e>=this._N)throw new RangeError(Z("0ivBd",e));return t=this._loc(r,e,[0,0]),O(this._buffer[t[0]],t[1])&&(this._buffer[t[0]]=K(this._buffer[t[0]],t[1]),this._M-=1),this})),S(er.prototype,"toAdjacencyList",(function(){var r,e,t,i,n;for(r=[],e=[0,0],i=0;i<this._N;i++){for(t=[],n=0;n<this._N;n++)e=this._loc(i,n,e),O(this._buffer[e[0]],e[1])&&t.push(n);r.push(t)}return r})),S(er.prototype,"toposort",(function(){var r,e,t,i,n,o,s;if(e=this,n=this._N,t=[],0===this._N)return[t,null];for(r=new Y(n),o=[],i=[0,0],s=0;s<n;s++)if(0===r[s]&&0!==f(s))return o.push(s),[null,o];return C(t.length,t,1),[t,null];function f(s){var h,u;if(2===r[s])return 0;if(1===r[s])return-1;for(r[s]=1,u=0;u<n;u++)if(i=e._loc(s,u,i),O(e._buffer[i[0]],i[1])&&0!==(h=f(u)))return o.push(u),h;return r[s]=2,t.push(s),0}}));var tr=er;export{tr as default};
//# sourceMappingURL=index.mjs.map
