// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import{isPrimitive as r}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-array-like-object@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-object@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-iterator-symbol-support@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/symbol-iterator@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-accessor@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/array-int32@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/array-int8@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.0.2-esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-ceil@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-floor@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-ext-base-grev@v0.0.10-esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/boolean-ctor@v0.0.1-esm/index.mjs";function v(r){var e,i,n;for(e=[];;){if(n=(i=r.next()).value){if(!t(n))return new TypeError(p("0ivBV",n));e.push(n)}if(i.done)break}return e}function w(r,e,i){var n,o,s,f;for(n=[],f=-1;;){if(f+=1,s=(o=r.next()).value){if(s=e.call(i,s,f),!t(s))return new TypeError(p("0ivBW",s));n.push(s)}if(o.done)break}return n}function g(r){var e,i,n;for(e=[];;){if(n=(i=r.next()).value){if(!t(n))return new TypeError(p("0ivBV",n));e.push(n[0],n[1])}if(i.done)break}return e}function E(r,e,i){var n,o,s,f;for(n=[],f=-1;;){if(f+=1,s=(o=r.next()).value){if(s=e.call(i,s,f),!t(s))return new TypeError(p("0ivBW",s));n.push(s[0],s[1])}if(o.done)break}return n}function _(r,e){return c(r>>e&1)}function y(r,e){return r>>e&1}var j=o(),b=8*d.BYTES_PER_ELEMENT;function x(e){if(!(this instanceof x))return new x(e);if(!r(e))throw new TypeError(p("0iv2V",e));return this._N=e,this._M=0,this._buffer=new d(a(e*e/b)),this}f(x,"fromAdjacencyList",(function(r){var o,f,h,d,u,a,l,m,c,g;if(!i(this))throw new TypeError(p("0iv01"));if(this!==x)throw new TypeError(p("0iv1m"));if((f=arguments.length)>1){if(!i(d=arguments[1]))throw new TypeError(p("0iv2S",d));f>2&&(o=arguments[2])}if(e(r)){if(u=new this(m=r.length),d){for(c=0;c<m;c++){if(h=d.call(o,r[c],c),!t(h))throw new TypeError(p("0ivBX",h));for(g=0;g<h.length;g++)u.addEdge(c,h[g])}return u}for(c=0;c<m;c++){if(h=r[c],!t(h))throw new TypeError(p("0ivBY",r));for(g=0;g<h.length;g++)u.addEdge(c,h[g])}return u}if(n(r)&&j&&i(r[s])){if(a=r[s](),!i(a.next))throw new TypeError(p("0iv2U",r));if((a=d?w(a,d,o):v(a))instanceof Error)throw a;for(u=new this(l=a.length),c=0;c<l;c++)for(h=a[c],g=0;g<h.length;g++)u.addEdge(c,h[g]);return u}throw new TypeError(p("0iv2U",r))})),f(x,"fromEdges",(function(t,o){var f,h,d,u,a,l,m,c;if(!i(this))throw new TypeError(p("0iv01"));if(this!==x)throw new TypeError(p("0iv1m"));if((h=arguments.length)>2){if(!i(d=arguments[2]))throw new TypeError(p("0iv3Z",d));h>3&&(f=arguments[3])}if(!r(t))throw new TypeError(p("0iv2p",t));if(e(o)){if(d){for(a=new this(t),c=0;c<o.length;c++){if(u=d.call(f,o[c],c),!e(u))throw new TypeError(p("0ivBX",u));a.addEdge(u[0],u[1])}return a}for(a=new this(t),c=0;c<o.length;c++){if(u=o[c],!e(u))throw new TypeError(p("0ivBZ",u));a.addEdge(u[0],u[1])}return a}if(n(o)&&j&&i(o[s])){if(l=o[s](),!i(l.next))throw new TypeError(p("0iv2U",o));if((l=d?E(l,d,f):g(l))instanceof Error)throw l;for(a=new this((m=l.length)/2),c=0;c<m;c+=2)a.addEdge(l[c],l[c+1]);return a}throw new TypeError(p("0ivBb",o))})),f(x.prototype,"_loc",(function(r,e,t){var i,n,o;return n=(o=r*this._N+e)-(i=l(o/b))*b,t[0]=i,t[1]=n,t})),f(x.prototype,"addEdge",(function(e,t){var i;if(!r(e))throw new TypeError(p("0iv2p",e));if(!r(t))throw new TypeError(p("0iv3k",t));if(e>=this._N)throw new RangeError(p("0ivBc",e));if(t>=this._N)throw new RangeError(p("0ivBd",t));return i=this._loc(e,t,[0,0]),!1===_(this._buffer[i[0]],i[1])&&(this._buffer[i[0]]=function(r,e){return r|1<<e}(this._buffer[i[0]],i[1]),this._M+=1),this})),h(x.prototype,"edges",(function(){var r,e,t,i;for(r=[],e=[0,0],t=0;t<this._N;t++)for(i=0;i<this._N;i++)e=this._loc(t,i,e),_(this._buffer[e[0]],e[1])&&r.push([t,i]);return r})),f(x.prototype,"hasEdge",(function(e,t){var i;if(!r(e))throw new TypeError(p("0iv2p",e));if(!r(t))throw new TypeError(p("0iv3k",t));if(e>=this._N)throw new RangeError(p("0ivBc",e));if(t>=this._N)throw new RangeError(p("0ivBd",t));return i=this._loc(e,t,[0,0]),_(this._buffer[i[0]],i[1])})),f(x.prototype,"inDegree",(function(e){var t,i,n;if(!r(e))throw new TypeError(p("0iv2V",e));if(e>=this._N)throw new RangeError(p("invalid argument. Vertex cannot exceed matrix dimensions. Value: `%u`.",e));for(t=0,i=[0,0],n=0;n<this._N;n++)i=this._loc(n,e,i),t+=y(this._buffer[i[0]],i[1]);return t})),f(x.prototype,"inEdges",(function(e){var t,i,n;if(!r(e))throw new TypeError(p("0iv2V",e));if(e>=this._N)throw new RangeError(p("invalid argument. Vertex cannot exceed matrix dimensions. Value: `%u`.",e));for(t=[],i=[0,0],n=0;n<this._N;n++)i=this._loc(n,e,i),_(this._buffer[i[0]],i[1])&&t.push(n);return t})),h(x.prototype,"nedges",(function(){return this._M})),h(x.prototype,"nvertices",(function(){return this._N})),f(x.prototype,"outDegree",(function(e){var t,i,n;if(!r(e))throw new TypeError(p("0iv2V",e));if(e>=this._N)throw new RangeError(p("invalid argument. Vertex cannot exceed matrix dimensions. Value: `%u`.",e));for(t=0,i=[0,0],n=0;n<this._N;n++)i=this._loc(e,n,i),t+=y(this._buffer[i[0]],i[1]);return t})),f(x.prototype,"outEdges",(function(e){var t,i,n;if(!r(e))throw new TypeError(p("0iv2V",e));if(e>=this._N)throw new RangeError(p("invalid argument. Vertex cannot exceed matrix dimensions. Value: `%u`.",e));for(t=[],i=[0,0],n=0;n<this._N;n++)i=this._loc(e,n,i),_(this._buffer[i[0]],i[1])&&t.push(n);return t})),f(x.prototype,"removeEdge",(function(e,t){var i;if(!r(e))throw new TypeError(p("0iv2p",e));if(!r(t))throw new TypeError(p("0iv3k",t));if(e>=this._N)throw new RangeError(p("0ivBc",e));if(t>=this._N)throw new RangeError(p("0ivBd",t));return i=this._loc(e,t,[0,0]),_(this._buffer[i[0]],i[1])&&(this._buffer[i[0]]=function(r,e){return r&~(1<<e)}(this._buffer[i[0]],i[1]),this._M-=1),this})),f(x.prototype,"toAdjacencyList",(function(){var r,e,t,i,n;for(r=[],e=[0,0],i=0;i<this._N;i++){for(t=[],n=0;n<this._N;n++)e=this._loc(i,n,e),_(this._buffer[e[0]],e[1])&&t.push(n);r.push(t)}return r})),f(x.prototype,"toposort",(function(){var r,e,t,i,n,o,s;if(e=this,n=this._N,t=[],0===this._N)return[t,null];for(r=new u(n),o=[],i=[0,0],s=0;s<n;s++)if(0===r[s]&&0!==f(s))return o.push(s),[null,o];return m(t.length,t,1),[t,null];function f(s){var h,d;if(2===r[s])return 0;if(1===r[s])return-1;for(r[s]=1,d=0;d<n;d++)if(i=e._loc(s,d,i),_(e._buffer[i[0]],i[1])&&0!==(h=f(d)))return o.push(d),h;return r[s]=2,t.push(s),0}}));export{x as default};
//# sourceMappingURL=index.mjs.map
